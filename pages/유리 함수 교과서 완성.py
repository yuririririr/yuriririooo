import streamlit as st

# -------------------------------
# 🌈 스타일
# -------------------------------
st.markdown("""
    <style>
    .title {
        font-size: 45px;
        text-align: center;
        color: #1E88E5;
        font-weight: bold;
        margin-top: 30px;
    }
    .subtitle {
        text-align: center;
        color: #555;
        font-size: 20px;
        margin-bottom: 30px;
    }
    .section {
        color: #1565C0;
        font-size: 26px;
        font-weight: bold;
        margin-top: 40px;
    }
    </style>
""", unsafe_allow_html=True)

# --------------------------------
# 📘 표지
# --------------------------------
st.markdown('<div class="title">📘 공통수학Ⅱ - 유리함수 교과서</div>', unsafe_allow_html=True)
st.markdown('<div class="subtitle">고1 수학 개념 완전 정복 시리즈 ✨</div>', unsafe_allow_html=True)
st.info("💡 이 교과서는 ‘유리함수’의 개념, 그래프, 실생활 응용, 그리고 시험 모드까지 포함된 완전판입니다!")

# --------------------------------
# 📗 단원 소개
# --------------------------------
st.markdown('<div class="section">1️⃣ 단원 소개</div>', unsafe_allow_html=True)
st.write("""
유리함수 단원은 **분모에 문자가 포함된 함수**를 다루며,  
그래프의 이동과 점근선의 개념, 실생활 응용을 배우는 단원이에요.

🎯 **학습 목표**
- 유리함수의 정의와 그래프 형태를 이해한다.  
- 점근선의 위치와 그래프 이동을 설명할 수 있다.  
- 실생활 문제를 유리함수로 모델링한다.
""")

# --------------------------------
# 📘 소단원 1 - 정의와 성질
# --------------------------------
st.markdown('<div class="section">2️⃣ 유리함수의 정의와 성질</div>', unsafe_allow_html=True)
st.write("""
**유리함수(Rational Function)**는 **분자와 분모가 모두 다항식인 함수**예요.

기본형:  
\\[
f(x) = \\frac{k}{x}, \\quad (k \\neq 0)
\\]

✔ **정의역:** x ≠ 0  
✔ **점근선:** 수직 x=0 / 수평 y=0  
✔ **대칭성:** 원점 대칭 (홀함수)  
✔ **부호:** k>0 → 1·3사분면, k<0 → 2·4사분면
""")

# --------------------------------
# 퀴즈 1
# --------------------------------
st.markdown("#### 🎯 확인 퀴즈 1")
q1 = st.radio(
    "다음 중 유리함수의 정의로 올바른 것은?",
    ["① 분모가 없는 함수", "② 분자와 분모가 모두 다항식인 함수", "③ 루트가 포함된 함수", "④ 분모가 0인 함수"]
)
score = 0
if q1:
    if q1.startswith("②"):
        st.success("✅ 정답! 유리함수는 분자와 분모가 모두 다항식인 함수예요.")
        score += 1
    else:
        st.error("❌ 오답! 유리함수는 분자·분모 모두 다항식이어야 합니다.")

# --------------------------------
# 📘 소단원 2 - 그래프의 형태 변화
# --------------------------------
st.markdown('<div class="section">3️⃣ 그래프의 형태 변화</div>', unsafe_allow_html=True)
st.write("""
그래프의 기본형 \\( y = \\frac{k}{x} \\) 에서 a, b가 추가되면 이동이 일어나요.

\\[
y = \\frac{k}{x - a} + b
\\]

📍 이동 요약  
- x방향: 오른쪽으로 a만큼  
- y방향: 위로 b만큼  
- 점근선: x=a, y=b
""")

st.markdown("#### 🎯 확인 퀴즈 2")
q2 = st.radio(
    "함수 y = 3/(x + 2) - 1 의 수직 점근선은?",
    ["① x = -2", "② x = 2", "③ y = -1", "④ y = 1"]
)
if q2:
    if q2.startswith("①"):
        st.success("✅ 정답! x = -2가 수직 점근선이에요.")
        score += 1
    else:
        st.error("❌ 오답! (x + 2) → x = -2로 해석해야 해요.")

# --------------------------------
# 📘 소단원 3 - 실생활 속 유리함수
# --------------------------------
st.markdown('<div class="section">4️⃣ 실생활 속 유리함수</div>', unsafe_allow_html=True)
st.write("""
유리함수는 **역비례 관계**를 설명할 때 많이 사용돼요.  
예시로는 아래와 같아요 👇  

| 분야 | 식 | 의미 |
|------|----|------|
| 💊 약의 농도 | C = k/(t + a) | 시간이 지날수록 농도 감소 |
| ⚡ 전류와 저항 | I = V/R | 저항이 클수록 전류 작아짐 |
| 🚗 속도와 이동시간 | t = 거리/v | 속도가 커질수록 시간 감소 |
""")

# --------------------------------
# 퀴즈 3
# --------------------------------
st.markdown("#### 🎯 확인 퀴즈 3")
q3 = st.radio(
    "속도 v와 시간 t가 t = 200/v 로 주어질 때, 속도가 2배가 되면 시간은?",
    ["① 2배 커진다", "② 2배 작아진다", "③ 4배 작아진다", "④ 변하지 않는다"]
)
if q3:
    if q3.startswith("②"):
        st.success("✅ 정답! 역비례 관계이므로 1/2배 됩니다.")
        score += 1
    else:
        st.error("❌ 오답! 속도가 2배면 시간은 1/2배예요.")

# --------------------------------
# 📘 소단원 4 - 응용/시험 모드
# --------------------------------
st.markdown('<div class="section">5️⃣ 시험 모드 - 심화 문제</div>', unsafe_allow_html=True)
st.write("🧩 아래의 문제를 풀어보세요. 직접 계산하거나 이유를 적어도 좋아요!")

# 문제 1 (서술형)
st.markdown("#### 🧮 문제 1")
st.write("""
함수 \\( f(x) = \\frac{2}{x - 1} + 3 \\)의 점근선을 구하고,  
그래프가 원점 기준으로 어떻게 이동했는지 설명하시오.
""")
ans1 = st.text_area("👉 여기에 풀이를 입력해보세요.")
if ans1:
    st.write("📘 정답 해설:")
    st.success("""
    - 수직 점근선: x = 1  
    - 수평 점근선: y = 3  
    - 그래프는 오른쪽으로 1, 위로 3만큼 이동
    """)

# 문제 2 (응용형)
st.markdown("#### 💡 문제 2")
st.write("""
전류 I와 저항 R의 관계가 \\( I = \\frac{12}{R} \\)일 때,  
R이 3Ω → 6Ω으로 증가할 때 전류의 변화를 설명하시오.
""")
q4 = st.radio(
    "전류 변화는?",
    ["① 2배 증가", "② 2배 감소", "③ 변하지 않음", "④ 4배 감소"]
)
if q4:
    if q4.startswith("②"):
        st.success("✅ 정답! 저항이 2배면 전류는 1/2배로 감소합니다.")
        score += 1
    else:
        st.error("❌ 오답! 유리함수의 역비례 관계를 떠올려보세요.")

# --------------------------------
# 📗 최종 점수 계산
# --------------------------------
st.markdown('<div class="section">6️⃣ 결과 확인</div>', unsafe_allow_html=True)
if st.button("📊 점수 계산하기"):
    st.subheader("🧾 결과 요약")
    st.write(f"당신의 점수는 **{score}/4점** 입니다!")
    if score == 4:
        st.balloons()
        st.success("🎉 완벽해요! 유리함수 단원 완전 정복 💙")
    elif score >= 2:
        st.info("👍 잘했어요! 개념은 거의 완벽하네요. 그래프 이동 부분만 복습해요.")
    else:
        st.warning("😢 조금 더 연습이 필요해요. 점근선 개념을 다시 복습해볼까요?")
