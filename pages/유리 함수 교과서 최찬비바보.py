import streamlit as st
import math

# --------------------------------
# 🌈 전체 스타일 (배경 + 색상 + 폰트)
# --------------------------------
st.markdown("""
<style>
body {
    background: linear-gradient(135deg, #E3F2FD 0%, #FFFFFF 100%);
    font-family: 'Noto Sans KR', sans-serif;
    color: #0D47A1;
}
section.main > div {
    background: rgba(255,255,255,0.9);
    padding: 2rem;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(33,150,243,0.15);
}
h1, h2, h3, h4 {
    color: #1565C0;
    text-shadow: 1px 1px 2px rgba(21,101,192,0.1);
}
.stButton button {
    background-color: #1565C0;
    color: white;
    border-radius: 8px;
    font-weight: bold;
}
.stButton button:hover {
    background-color: #0D47A1;
}
table {
    background-color: #F6FAFF;
    border-collapse: collapse;
    width: 100%;
    border-radius: 8px;
}
table th, table td {
    border: 1px solid #E3F2FD;
    padding: 8px;
    text-align: center;
}
</style>
""", unsafe_allow_html=True)

# --------------------------------
# 📘 표지
# --------------------------------
st.markdown("<h1 style='text-align:center;'>📘 공통수학Ⅱ - 유리함수 교과서</h1>", unsafe_allow_html=True)
st.markdown("<h3 style='text-align:center;'>개념 · 그래프 · 이동 · 실생활 활용</h3>", unsafe_allow_html=True)
st.info("이 교과서는 공통수학Ⅱ 교과 내용을 기반으로 구성되었습니다. "
        "학생이 직접 개념을 이해하고, 실생활 속에서 유리함수가 어떻게 활용되는지 탐구할 수 있습니다.")

# --------------------------------
# 1️⃣ 유리함수의 뜻
# --------------------------------
st.header("1️⃣ 유리함수의 뜻")
st.write("""
**유리함수**는 분자와 분모가 모두 다항식으로 이루어진 함수입니다.  
즉, 다음과 같은 형태를 가집니다.
\\[
f(x) = \\frac{P(x)}{Q(x)}, \\quad (Q(x) \\neq 0)
\\]
이때, 분모가 0이 되는 값에서는 함수값이 정의되지 않습니다.  
따라서 유리함수의 **정의역**은 분모를 0으로 만드는 x값을 제외한 모든 실수입니다.
""")
st.info("예시) \\( f(x) = \\frac{2x + 1}{x - 3} \\) 에서 x=3은 분모가 0이므로 정의되지 않습니다.")

# --------------------------------
# 2️⃣ 기본형 유리함수의 그래프
# --------------------------------
st.header("2️⃣ 기본형 유리함수의 그래프")
st.write("""
가장 기본적인 유리함수는 다음과 같습니다.
\\[
y = \\frac{k}{x} \\quad (k \\neq 0)
\\]
이 함수의 그래프는 x축과 y축에 가까워지지만 닿지 않습니다.  
따라서 **수직점근선은 x=0**, **수평점근선은 y=0**입니다.
""")

st.markdown("""
| 구분 | k > 0 | k < 0 |
|------|--------|--------|
| 그래프 위치 | 1사분면과 3사분면 | 2사분면과 4사분면 |
| 대칭성 | 원점 대칭 | 원점 대칭 |
| 점근선 | x=0, y=0 | x=0, y=0 |
""")

st.warning("💡 ‘점근선’은 그래프가 가까워지지만 닿지 않는 직선을 의미합니다.")

# --------------------------------
# 3️⃣ 유리함수의 그래프 이동
# --------------------------------
st.header("3️⃣ 유리함수의 그래프 이동")
st.write("""
유리함수의 그래프는 다음과 같은 형태로 이동할 수 있습니다.
\\[
y = \\frac{k}{x - a} + b
\\]
이 식에서 **a**와 **b**는 각각 그래프의 이동을 나타냅니다.
""")

st.markdown("""
| 항목 | 의미 | 점근선 |
|------|------|---------|
| a | 그래프를 오른쪽으로 a만큼 이동 | x = a |
| b | 그래프를 위로 b만큼 이동 | y = b |
""")
st.success("그래프의 중심은 (a, b)이고, 이 점을 중심으로 점대칭입니다.")

# --------------------------------
# 4️⃣ 예제와 풀이
# --------------------------------
st.header("4️⃣ 예제와 풀이")
st.markdown("""
**예제 1**  
\\( y = \\frac{2}{x - 3} + 1 \\)의 그래프의 점근선을 구하시오.

**풀이:**  
- 분모를 0으로 만드는 x값: x=3 → 수직점근선 x=3  
- b=1 → 수평점근선 y=1  
따라서 점근선은 **x=3, y=1**입니다.
""")

st.markdown("""
**예제 2**  
\\( y = -\\frac{3}{x + 1} - 2 \\)의 그래프의 이동을 설명하시오.

**풀이:**  
- (x+1)은 x=-1에서 분모가 0 → 오른쪽으로 **-1**, 즉 왼쪽으로 1만큼 이동  
- -2는 아래로 2만큼 이동  
- k가 음수이므로 그래프는 2사분면과 4사분면에 위치합니다.
""")

# --------------------------------
# 5️⃣ 유리함수의 성질 정리
# --------------------------------
st.header("5️⃣ 유리함수의 성질 정리")
st.markdown("""
| 항목 | 내용 |
|------|------|
| 정의 | 분자와 분모가 모두 다항식 |
| 정의역 | 분모를 0으로 만드는 값을 제외한 모든 실수 |
| 점근선 | 수직점근선: x=a, 수평점근선: y=b |
| 대칭성 | (a,b)를 중심으로 점대칭 |
| 부호 | k>0 → 1·3사분면, k<0 → 2·4사분면 |
""")

# --------------------------------
# 6️⃣ 유리함수의 실생활 활용
# --------------------------------
st.header("6️⃣ 유리함수의 실생활 활용")
st.write("유리함수는 다양한 분야에서 **역비례 관계**를 표현하는 데 사용됩니다. 다음은 교과서에서 다룰 수 있는 대표 사례들입니다.")

st.markdown("""
### 💧 ① 속도와 시간의 관계
물체가 일정한 거리 D를 이동할 때,
\\[
t = \\frac{D}{v}
\\]
이 식은 속도가 커질수록 시간이 줄어드는 **역비례 관계**를 보여줍니다.  
→ **유리함수의 형태입니다.**
""")

st.markdown("""
### ⚡ ② 전류와 저항의 관계
옴의 법칙에 따르면 전류 I는 전압 V를 저항 R로 나눈 값입니다.
\\[
I = \\frac{V}{R}
\\]
저항이 커질수록 전류가 작아집니다.  
→ 분모가 커질수록 함수값이 작아지는 유리함수의 특징과 동일합니다.
""")

st.markdown("""
### ☕ ③ 농도 희석
용질의 양 S가 일정하고, 용액의 부피가 (V₀+x)로 증가하면,
\\[
C = \\frac{S}{V_0 + x}
\\]
물의 양이 늘어날수록 농도는 감소합니다.  
→ 농도와 부피는 **역비례 관계**로, 유리함수로 표현됩니다.
""")

st.markdown("""
### 🔭 ④ 얇은 렌즈의 초점거리 공식
얇은 렌즈 공식은 다음과 같습니다.
\\[
\\frac{1}{f} = \\frac{1}{u} + \\frac{1}{v} \\Rightarrow v = \\frac{fu}{u - f}
\\]
이는 u에 대한 유리함수입니다.  
물체의 위치(u)가 초점거리(f)에 가까워질수록 상의 거리(v)는 급격히 커집니다.
""")

st.markdown("""
### 💰 ⑤ 경제적 효율 분석
생산비용이 일정할 때, 상품의 개수를 늘릴수록 **평균비용**은 다음과 같이 감소합니다.
\\[
평균비용 = \\frac{총비용}{생산량}
\\]
생산량이 많아질수록 평균비용은 감소하므로, 이 역시 유리함수의 역비례 관계입니다.
""")

# --------------------------------
# 7️⃣ 확인 문제
# --------------------------------
st.header("7️⃣ 확인 문제")
st.write("다음 중 유리함수의 성질에 대한 설명으로 옳은 것을 고르시오.")

q1 = st.radio(
    "①",
    ["A. 유리함수는 분모가 0인 곳에서도 항상 정의된다.",
     "B. y = k/x 그래프는 직선이다.",
     "C. y = k/x 의 그래프는 원점 대칭이다.",
     "D. 유리함수의 그래프는 점근선을 갖지 않는다."],
    index=None
)
if q1 and q1.startswith("C"):
    st.success("✅ 정답: C. 유리함수 y=k/x는 원점에 대하여 대칭입니다.")
else:
    if q1:
        st.error("❌ 오답이에요. y=k/x는 원점 대칭입니다.")

q2 = st.radio(
    "② 다음 중 유리함수의 실생활 예시로 적절하지 않은 것은?",
    ["A. 속도와 이동 시간", "B. 물의 양과 농도", "C. 전류와 저항", "D. 직선의 기울기와 y절편"],
    index=None
)
if q2 and q2.startswith("D"):
    st.success("✅ 정답: D. 기울기와 y절편은 유리함수 관계가 아닙니다.")
else:
    if q2:
        st.error("❌ D가 정답입니다. 나머지는 역비례 관계입니다.")

# --------------------------------
# 8️⃣ 단원 요약
# --------------------------------
st.header("8️⃣ 단원 요약")
st.markdown("""
| 항목 | 핵심 내용 |
|------|------------|
| 유리함수의 뜻 | 분자·분모 모두 다항식 |
| 정의역 | 분모를 0으로 만드는 값 제외 |
| 점근선 | 수직: x=a / 수평: y=b |
| 대칭성 | (a,b)를 중심으로 점대칭 |
| 그래프 이동 | y=k/(x-a)+b 형태 |
| 실생활 예시 | 속도-시간, 전류-저항, 농도, 렌즈, 경제 효율 |
""")
st.success("🎓 유리함수는 ‘나눗셈 관계’의 본질을 담고 있으며, 수학과 과학, 경제 등 여러 분야에서 실제로 활용되는 매우 중요한 함수입니다.")
