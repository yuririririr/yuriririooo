import streamlit as st
import math

# ========================
# ğŸŒˆ Global Style (ë°°ê²½/íƒ€ì´í¬/ì¹´ë“œ)
# ========================
st.markdown("""
<style>
/* ë°°ê²½ ê·¸ëŸ¬ë°ì´ì…˜ */
body {
  background: linear-gradient(160deg, #E3F2FD 0%, #F5FBFF 40%, #FFFFFF 100%);
  color: #0D47A1;
  font-family: 'Noto Sans KR', sans-serif;
}
/* ë©”ì¸ ì¹´ë“œ ëŠë‚Œ */
section.main > div {
  background-color: rgba(255,255,255,0.92);
  padding: 28px;
  border-radius: 16px;
  box-shadow: 0 6px 18px rgba(21,101,192,0.15);
}
/* í—¤ë”ë“¤ */
h1, h2, h3, h4 { color:#1565C0; }
/* ë²„íŠ¼ */
.stButton button {
  background:#1565C0; color:#fff; border-radius:8px; font-weight:700; padding:8px 16px;
}
.stButton button:hover{ background:#0D47A1; }
/* ìƒì */
.card { background:#F6FAFF; border:1px solid #E3F2FD; padding:16px; border-radius:12px; }
.warn { background:#FFF8E1; border:1px solid #FFE082; padding:16px; border-radius:12px; color:#6A4F00;}
.ok { background:#E8F5E9; border:1px solid #C8E6C9; padding:16px; border-radius:12px; color:#1B5E20;}
.code { background:#FAFAFA; border:1px solid #EEE; padding:12px; border-radius:8px; color:#111;}
.small { color:#1565C0; font-size: 0.94rem;}
</style>
""", unsafe_allow_html=True)

# ========================
# ğŸ“˜ í‘œì§€
# ========================
st.markdown("<h1 style='text-align:center;'>ğŸ“˜ ê³µí†µìˆ˜í•™â…¡ â€” ìœ ë¦¬í•¨ìˆ˜ êµê³¼ì„œ (ì‹¬í™”Â·ì„¤ëª… ê°•í™”íŒ)</h1>", unsafe_allow_html=True)
st.markdown("<h4 style='text-align:center;'>ì •ì˜ â†’ ì •ì˜ì—­ ì•Œê³ ë¦¬ì¦˜ â†’ ì ê·¼ì„ (ê·¹í•œ) â†’ ì†Œê±°/êµ¬ë© â†’ ìˆ˜í‰Â·ì‚¬ì„  ì ê·¼ì„  â†’ ë³€í™˜ íŒŒì´í”„ë¼ì¸ â†’ ì‹¤ìƒí™œ ëª¨ë¸ë§ â†’ ì‹¬í™” í€´ì¦ˆ</h4>", unsafe_allow_html=True)
st.info("ì´ êµì¬ëŠ” **ì™œ ê·¸ëŸ°ì§€(ì¦ëª…/ì›ë¦¬)**ê¹Œì§€ íŒŒê³ ë“œëŠ” ì‹¬í™” ì„¤ëª…ì„ í¬í•¨í•´ìš”. ëª¨ë“  ë‚´ìš©ì€ ì´ë¯¸ì§€ ì—†ì´ í…ìŠ¤íŠ¸Â·ìˆ˜ì‹Â·ì¸í„°ë™ì…˜ìœ¼ë¡œë§Œ êµ¬ì„±ë©ë‹ˆë‹¤.")

# ========================
# 1. ë‹¨ì› ê°œìš”
# ========================
st.header("1ï¸âƒ£ ë‹¨ì› ê°œìš”")
st.write("""
**ìœ ë¦¬í•¨ìˆ˜**ë€ **ë¶„ìì™€ ë¶„ëª¨ê°€ ëª¨ë‘ ë‹¤í•­ì‹**ì¸ í•¨ìˆ˜. ì¼ë°˜í˜•ì€
\\[
R(x)=\\frac{P(x)}{Q(x)},\\quad \\text{ë‹¨ } Q(x)\\neq 0.
\\]
í•µì‹¬ ë…¼ì ì€ **(i) ì •ì˜ì—­ ê²°ì •**ê³¼ **(ii) ì ê·¼ì„ (ìˆ˜ì§/ìˆ˜í‰/ì‚¬ì„ )ì˜ í•´ì„**, ê·¸ë¦¬ê³  **(iii) ê·¸ë˜í”„ ë³€í™˜**ì´ì—ìš”.
""")
st.success("ëª©í‘œ: ì„ì˜ì˜ ìœ ë¦¬í•¨ìˆ˜ R(x)ì— ëŒ€í•´ **ì •ì˜ì—­, ë¶ˆì—°ì†ì (êµ¬ë©/ìˆ˜ì§ì ê·¼ì„ ), ë¬´í•œì›ë°© í–‰ë™(ìˆ˜í‰/ì‚¬ì„  ì ê·¼ì„ )**ì„ ìŠ¤ìŠ¤ë¡œ íŒì •í•˜ê³ , ì‹¤ìƒí™œ ëª¨ë¸ë§ì— ì ìš©í•˜ê¸°.")

# ========================
# 2. ì •ì˜ì™€ ê¸°ë³¸ ì„±ì§ˆ + 'êµ¬ë©' ê°œë…
# ========================
st.header("2ï¸âƒ£ ì •ì˜Â·ê¸°ë³¸ ì„±ì§ˆÂ·êµ¬ë©(ê°€ë¶„ìˆ˜ ì†Œê±°)")

with st.expander("ì •ì˜ì™€ ê¸°ë³¸ ì„±ì§ˆ (ìì„¸íˆ ë³´ê¸°)", expanded=True):
    st.markdown(r"""
**ì •ì˜**  
- ìœ ë¦¬í•¨ìˆ˜: \(R(x)=\dfrac{P(x)}{Q(x)}\) (P,Q ë‹¤í•­ì‹, \(Q\not\equiv 0\))  
- ì •ì˜ì—­: \(Q(x)\neq 0\) ì¸ ëª¨ë“  ì‹¤ìˆ˜

**ìˆ˜ì§ ì ê·¼ì„  vs êµ¬ë©(ì œê±° ê°€ëŠ¥ ë¶ˆì—°ì†)**  
- ë§Œì•½ \(Q(a)=0\) ì´ê³  \(P(a)\neq 0\) ì´ë©´, \(x=a\)ëŠ” **ìˆ˜ì§ ì ê·¼ì„ ** í›„ë³´ (ê°’ì´ ë°œì‚°)  
- ë§Œì•½ \(Q(a)=0\) ì´ê³  ë™ì‹œì— \(P(a)=0\) ì´ë©´, ê³µí†µì¸ìˆ˜ \((x-a)\)ë¥¼ ì†Œê±° ê°€ëŠ¥:
  \[
  R(x)=\frac{(x-a)S(x)}{(x-a)T(x)}=\frac{S(x)}{T(x)}\quad (x\neq a)
  \]
  ì´ë•Œ \(x=a\)ì—ì„œëŠ” ê°’ì´ ì •ì˜ë˜ì§€ ì•Šì§€ë§Œ **ê·¹í•œì€ ìœ í•œ** â†’ **â€˜êµ¬ë©(ì œê±° ê°€ëŠ¥ ë¶ˆì—°ì†)â€™**  

**ìˆ˜í‰/ì‚¬ì„  ì ê·¼ì„  (ë¬´í•œëŒ€ì—ì„œì˜ í–‰ë™)**  
- \(\deg P < \deg Q\): \(x\to\pm\infty\Rightarrow R(x)\to 0\) â‡’ **ìˆ˜í‰ ì ê·¼ì„  \(y=0\)**  
- \(\deg P = \deg Q\): ìµœê³ ì°¨ ê³„ìˆ˜ ë¹„ë¡œ ìˆ˜ë ´ â‡’ **ìˆ˜í‰ ì ê·¼ì„  \(y=\dfrac{\text{LC}(P)}{\text{LC}(Q)}\)**  
- \(\deg P = \deg Q + 1\): ë‹¤í•­ ë‚˜ëˆ—ì…ˆìœ¼ë¡œ 1ì°¨ ëª« \(y=mx+b\) â‡’ **ì‚¬ì„  ì ê·¼ì„ **  
- \(\deg P \ge \deg Q + 2\): ëª«ì´ 2ì°¨ ì´ìƒ â‡’ **ì¼ë°˜ ë‹¤í•­ ì ê·¼ì„ ** (ê³ ë“± ê³¼ì •ì—ì„  ë“œë¬¾)
""")

with st.expander("ì •ì˜ì—­ íŒì • â€¢ ë‹¨ê³„ë³„ ì•Œê³ ë¦¬ì¦˜", expanded=True):
    st.markdown(r"""
**ì…ë ¥:** \(R(x)=\dfrac{P(x)}{Q(x)}\)  
**ì¶œë ¥:** ì •ì˜ì—­, ìˆ˜ì§ì ê·¼ì„ , êµ¬ë©  
**ì ˆì°¨:**  
1) \(Q(x)=0\)ì„ í’€ì–´ ê·¼ ì§‘í•© \(\{a_i\}\) êµ¬í•˜ê¸° â†’ **ì •ì˜ì—­ì€ ëª¨ë“  ì‹¤ìˆ˜ì—ì„œ \(\{a_i\}\) ì œì™¸**  
2) ê° \(a_i\)ì— ëŒ€í•´ \(P(a_i)\)ë„ 0ì¸ì§€ í™•ì¸  
   - \(P(a_i)\neq 0\): **ìˆ˜ì§ ì ê·¼ì„ ** í›„ë³´  
   - \(P(a_i)=0\): \((x-a_i)\) ê³µí†µì¸ìˆ˜ ì†Œê±° â†’ **êµ¬ë©**  
3) ì†Œê±° í›„ ê°„ì´ì‹ì—ì„œ ê·¹í•œê°’ì„ êµ¬í•˜ë©´ êµ¬ë©ì˜ **ì¢Œí‘œ**ê¹Œì§€ ì°¾ì„ ìˆ˜ ìˆìŒ
""")

st.markdown("#### âœ” ë¯¸ë‹ˆ í™•ì¸")
colA, colB = st.columns(2)
with colA:
    st.markdown("**ì˜ˆ1)** \(R(x)=\\dfrac{x^2-1}{x-1}\)")
    st.write("ë¶„ì=(x-1)(x+1), ë¶„ëª¨=(x-1) â†’ ì†Œê±° í›„ \(x+1\) (ë‹¨, xâ‰ 1).")
    st.info("ì •ì˜ì—­: â„\\{1}, x=1ì€ **êµ¬ë©**, êµ¬ë© yê°’ì€ ê·¹í•œ \(\\lim_{x\\to1}(x+1)=2\).")
with colB:
    st.markdown("**ì˜ˆ2)** \(R(x)=\\dfrac{1}{x-1}\)")
    st.info("ì •ì˜ì—­: â„\\{1}, x=1ì—ì„œ **ìˆ˜ì§ ì ê·¼ì„ ** (ë°œì‚°). êµ¬ë©ì€ ì—†ìŒ.")

# ========================
# 3. ì ê·¼ì„ ì˜ ê·¹í•œ ì •ì˜ì™€ ì‚¬ì„  ë„ì¶œ
# ========================
st.header("3ï¸âƒ£ ì ê·¼ì„ : ê·¹í•œìœ¼ë¡œ ì •í™•íˆ ì´í•´í•˜ê¸°")

with st.expander("ìˆ˜ì§/ìˆ˜í‰ ì ê·¼ì„  â€” ê·¹í•œ ì •ì˜", expanded=True):
    st.markdown(r"""
- **ìˆ˜ì§ ì ê·¼ì„ ** \(x=a\): \(\lim_{x\to a^\pm}R(x)=\pm\infty\)  
- **ìˆ˜í‰ ì ê·¼ì„ ** \(y=L\): \(\lim_{x\to\pm\infty}R(x)=L\)  

ìœ ë¦¬í•¨ìˆ˜ì—ì„  **ì°¨ìˆ˜ ë¹„êµ**ë¡œ ìˆ˜í‰ ì ê·¼ì„ ì„ ë¹ ë¥´ê²Œ íŒì •í•  ìˆ˜ ìˆì–´ìš”.
""")

with st.expander("ì‚¬ì„  ì ê·¼ì„  â€” ë‹¤í•­ ë‚˜ëˆ—ì…ˆìœ¼ë¡œ ë„ì¶œ", expanded=True):
    st.markdown(r"""
\[
R(x)=\frac{P(x)}{Q(x)}=M(x)+\frac{R_{\text{rem}}(x)}{Q(x)}
\]
ì—¬ê¸°ì„œ \(M(x)\)ëŠ” ë‚˜ëˆ—ì…ˆ ëª«(ë‹¤í•­ì‹), ë‚˜ë¨¸ì§€ ì°¨ìˆ˜ < \(Q\) ì°¨ìˆ˜.  
\(x\to\infty\)ì—ì„œ \(\frac{R_{\text{rem}}}{Q}\to 0\) ì´ë©´ **ê·¸ë˜í”„ëŠ” \(y=M(x)\)ì— ì ‘ê·¼**.  
íŠ¹íˆ \(\deg P = \deg Q + 1\)ì´ë©´ \(M(x)\)ê°€ 1ì°¨ â†’ **ì‚¬ì„  ì ê·¼ì„ **.
""")

st.markdown("#### âœ” ì˜ˆ: ì‚¬ì„  ì ê·¼ì„  ë¹ ë¥¸ íŒì •")
st.markdown("""
- \(R(x)=\\dfrac{x^2+1}{x}\): \\(\\deg P=2, \\deg Q=1\\Rightarrow\\) ì‚¬ì„  ì¡´ì¬. ì‹¤ì œë¡œ ë‚˜ëˆ„ë©´ \(x + \\dfrac{1}{x}\\) â†’ \(y=x\).
- \(R(x)=\\dfrac{2x^2-3}{x+1}\\): ë‚˜ëˆ—ì…ˆí•˜ë©´ \(2x-2 + \\dfrac{-1}{x+1}\\) â†’ ì‚¬ì„  \(y=2x-2\).
""")

# ========================
# 4. ê·¸ë˜í”„ ë³€í™˜ íŒŒì´í”„ë¼ì¸ (ì •ë°€)
# ========================
st.header("4ï¸âƒ£ ê·¸ë˜í”„ ë³€í™˜ íŒŒì´í”„ë¼ì¸")
st.write("""
ì„ì˜ì˜ \(R(x)=\\dfrac{k}{x-a}+b\)ëŠ” **ê¸°ë³¸í˜•** \(\\dfrac{k}{x}\)ë¥¼
1) xâ†’x-a (ì˜¤ë¥¸ìª½ìœ¼ë¡œ a), 2) ì „ì²´ì— +b (ìœ„ë¡œ b) í•œ ê²°ê³¼ì˜ˆìš”.  
- ìˆ˜ì§ì ê·¼ì„ : x=a, ìˆ˜í‰ì ê·¼ì„ : y=b  
- k>0ì´ë©´ 1Â·3ì‚¬ë¶„ë©´, k<0ì´ë©´ 2Â·4ì‚¬ë¶„ë©´ ë°°ì¹˜ (ì›ì ëŒ€ì¹­ì„±ì´ ì´ë™ê³¼ í•¨ê»˜ (a,b) ì ëŒ€ì¹­ìœ¼ë¡œ í•´ì„ë¨)
""")
with st.expander("ìì£¼ í‹€ë¦¬ëŠ” í¬ì¸íŠ¸", expanded=True):
    st.markdown("""
- **(x+a)**ë©´ ìˆ˜ì§ì ê·¼ì„ ì€ **x=-a** (ë¶€í˜¸ ì£¼ì˜)  
- êµ¬ë©ê³¼ ìˆ˜ì§ì ê·¼ì„ ì€ ë‹¤ë¦„: **ì†Œê±°ë˜ë©´ êµ¬ë©**, ì†Œê±° ì•ˆ ë˜ë©´ **ì ê·¼ì„ **  
- ìˆ˜í‰ì ê·¼ì„ ì€ ê·¸ë˜í”„ê°€ â€˜ë‹¿ì„ ìˆ˜ ìˆìŒâ€™ (ë¬´í•œì›ë°© ì„±ì§ˆì¼ ë¿, ë‹¿ì§€ ë§ë¼ëŠ” ë²• ì—†ìŒ)
""")

# ========================
# 5. ì‹¤ìƒí™œ ëª¨ë¸ë§ (ì‹ ë„ì¶œ + ë„ë©”ì¸/ì ê·¼ì„  í•´ì„ + ê³„ì‚°ê¸°)
# ========================
st.header("5ï¸âƒ£ ì‹¤ìƒí™œ ëª¨ë¸ë§ (ì‹ ë„ì¶œ â†’ í•´ì„ â†’ ê³„ì‚°ê¸°)")

st.subheader("A) ì†ë„-ì‹œê°„ (ì •í™•í•œ ìœ ë¦¬í•¨ìˆ˜)")
with st.expander("ëª¨ë¸ ë„ì¶œÂ·í•´ì„", expanded=True):
    st.markdown(r"""
**ìƒí™©**: ê±°ë¦¬ \(D\) ê³ ì •, ì†ë„ \(v\) ê°€ë³€ â†’ ì‹œê°„ \(t\).  
**ë„ì¶œ**: \(t=\dfrac{D}{v}\).  
**ì •ì˜ì—­**: \(v>0\). **ì ê·¼ì„ **: \(v\to\infty\Rightarrow t\to0\) (ìˆ˜í‰ y=0), \(v\to0^+\Rightarrow t\to\infty\) (ìˆ˜ì§ x=0).
""")
col = st.columns(3)
D = col[0].number_input("ê±°ë¦¬ D (m)", 1.0, 1e9, 100.0, 10.0)
v = col[1].number_input("ì†ë„ v (m/s, >0)", 0.1, 1e6, 5.0, 0.1)
t = D / v
col[2].success(f"â±ï¸ t = {t:.2f} s")
qa = st.radio("í€´ì¦ˆ A: vë¥¼ 5ë°°ë¡œ í‚¤ìš°ë©´ tëŠ”?", ["â‘  5ë°°", "â‘¡ 1/5ë°°", "â‘¢ ë™ì¼", "â‘£ 25ë°°"], horizontal=True)
if qa: st.success("ì •ë‹µ: â‘¡ (ì—­ë¹„ë¡€)") if qa.startswith("â‘¡") else st.error("ì†ë„â†‘ â†’ ì‹œê°„â†“")

st.subheader("B) í¬ì„ ë†ë„ (ì •í™•í•œ ìœ ë¦¬í•¨ìˆ˜)")
with st.expander("ëª¨ë¸ ë„ì¶œÂ·í•´ì„", expanded=True):
    st.markdown(r"""
ìš©ì§ˆ \(S\)ëŠ” ê³ ì •, ë¬¼ì„ \(x\) mL ì¶”ê°€ â†’ ì´ë¶€í”¼ \(V_0+x\),  
ë†ë„ \(C(x)=\dfrac{S}{V_0+x}\).  
**ì •ì˜ì—­**: \(x>-V_0\). **ì ê·¼ì„ **: \(x\to\infty\Rightarrow C\to 0\) (ìˆ˜í‰), \(x\to -V_0^+\)ì—ì„œ ìˆ˜ì§.
""")
c1, c2, c3 = st.columns(3)
S = c1.number_input("ìš©ì§ˆ S (g)", 0.1, 1e6, 10.0, 0.1)
V0 = c2.number_input("ì´ˆê¸°ë¶€í”¼ V0 (mL)", 1.0, 1e9, 100.0, 1.0)
x_add = c3.slider("ì¶”ê°€ ë¬¼ x (mL)", 0, 500, 100)
C = S/(V0 + x_add)
st.success(f"ğŸ¥¤ C = {C:.4f} g/mL")
qb = st.radio("í€´ì¦ˆ B: xë¥¼ 4ë°°ë¡œ ëŠ˜ë¦¬ë©´ CëŠ”?", ["â‘  4ë°° â†‘", "â‘¡ 1/4ë°° â†“", "â‘¢ ë™ì¼", "â‘£ 2ë°° â†‘"], horizontal=True)
if qb: st.success("ì •ë‹µ: â‘¡ (ë¶„ëª¨ê°€ ì»¤ì§€ë©´ ì „ì²´ëŠ” ê°ì†Œ)") if qb.startswith("â‘¡") else st.error("ë¶„ëª¨â†— â†’ ê°’â†˜")

st.subheader("C) ë³‘ë ¬ì €í•­ (ì •í™•í•œ ìœ ë¦¬í•¨ìˆ˜)")
with st.expander("ëª¨ë¸ ë„ì¶œÂ·í•´ì„", expanded=True):
    st.markdown(r"""
\[
\frac{1}{R}=\frac{1}{R_1}+\frac{1}{R_2}\Rightarrow R=\frac{R_1R_2}{R_1+R_2}
\]
**ì •ì˜ì—­**: \(R_1,R_2>0\). \(R_1\to\infty\Rightarrow R\to R_2\) (í° ì €í•­ì€ ì‚¬ì‹¤ìƒ ëŠì–´ì§„ ì„ ê³¼ ìœ ì‚¬).
""")
d1, d2, d3 = st.columns(3)
R1 = d1.number_input("R1 (Î©)", 0.1, 1e9, 100.0, 1.0)
R2 = d2.number_input("R2 (Î©)", 0.1, 1e9, 200.0, 1.0)
Req = (R1*R2)/(R1+R2)
d3.success(f"ğŸ”Œ R = {Req:.3f} Î©")
qc = st.radio("í€´ì¦ˆ C: R1=R2=Rì´ë©´ í•©ì„±ì €í•­ì€?", ["â‘  R/2", "â‘¡ R", "â‘¢ 2R", "â‘£ 0"], horizontal=True)
if qc: st.success("ì •ë‹µ: â‘ ") if qc.startswith("â‘ ") else st.error("ë³‘ë ¬ì´ë©´ ë™ì¼ì €í•­ ë‘ ê°œ â†’ ì ˆë°˜.")

st.subheader("D) ì–‡ì€ ë Œì¦ˆ (ì •í™•í•œ ìœ ë¦¬í•¨ìˆ˜)")
with st.expander("ëª¨ë¸ ë„ì¶œÂ·í•´ì„", expanded=True):
    st.markdown(r"""
\[
\frac{1}{f}=\frac{1}{u}+\frac{1}{v} \Rightarrow v=\frac{fu}{u-f}
\]
**ì •ì˜ì—­**: \(u\neq f\). **ì ê·¼ì„ **: ìˆ˜ì§ \(u=f\), ìˆ˜í‰ \(v\to f\) (uâ†’âˆ).
""")
e1, e2, e3 = st.columns(3)
f = e1.number_input("ì´ˆì ê±°ë¦¬ f (cm)", 0.1, 1e6, 10.0, 0.1)
u = e2.number_input("ë¬¼ì²´ê±°ë¦¬ u (cm, uâ‰ f)", 0.1, 1e6, 30.0, 0.1)
if abs(u - f) < 1e-12:
    e3.error("u=f ì—ì„œëŠ” ì •ì˜ë˜ì§€ ì•ŠìŒ (ìˆ˜ì§ ì ê·¼ì„ ).")
else:
    v = (f*u)/(u-f)
    e3.success(f"ğŸ”­ v = {v:.2f} cm")
qd = st.radio("í€´ì¦ˆ D: uâ†’âˆì´ë©´ vëŠ”?", ["â‘  0", "â‘¡ f", "â‘¢ âˆ", "â‘£ -f"], horizontal=True)
if qd: st.success("ì •ë‹µ: â‘¡ (ìˆ˜í‰ ì ê·¼ì„  y=f)") if qd.startswith("â‘¡") else st.error("ë©€ìˆ˜ë¡ ìƒì€ ì´ˆì ë©´ì— ê·¼ì ‘.")

# ========================
# 6. ì‹¬í™” í€´ì¦ˆ (í’€ì´ ë‹¨ê³„ ê³µê°œ)
# ========================
st.header("6ï¸âƒ£ ì‹¬í™” í€´ì¦ˆ (í’€ì´ ê³µê°œ)")

st.markdown("**Q1.** \( R(x)=\\dfrac{(x-2)(x+1)}{(x-2)(x-3)} \) ì˜ ë¶ˆì—°ì†ì  ë¶„ë¥˜ ë° ì¢Œí‘œë¥¼ íŒì •í•˜ë¼.")
show1 = st.toggle("ì •ë‹µ/í’€ì´ ë³´ê¸°", value=False, key="q1")
if show1:
    st.markdown("""
- ë¶„ëª¨=0ì¸ x=2,3ì´ í›„ë³´.  
- x=2ëŠ” ë¶„ìë„ 0 â†’ **ì†Œê±° ê°€ëŠ¥ â†’ êµ¬ë©**. ì†Œê±° í›„ \(R(x)=\\dfrac{x+1}{x-3}\).  
  êµ¬ë© yì¢Œí‘œ: \(\lim_{x\\to2} \\dfrac{x+1}{x-3} = \\dfrac{3}{-1} = -3\) â†’ **(2, -3)ì—ì„œ êµ¬ë©**  
- x=3ì€ ë¶„ìâ‰ 0 â†’ **ìˆ˜ì§ ì ê·¼ì„  x=3**.
""", unsafe_allow_html=True)

st.markdown("**Q2.** \( R(x)=\\dfrac{2x^2-3}{x+1} \) ì˜ ì‚¬ì„  ì ê·¼ì„ ì„ êµ¬í•˜ë¼.")
show2 = st.toggle("ì •ë‹µ/í’€ì´ ë³´ê¸°", value=False, key="q2")
if show2:
    st.markdown(r"""
ë‹¤í•­ ë‚˜ëˆ—ì…ˆ: \(\dfrac{2x^2-3}{x+1}=2x-2+\dfrac{-1}{x+1}\).  
ë‚˜ë¨¸ì§€ í•­ì€ 0ìœ¼ë¡œ ìˆ˜ë ´ â‡’ **ì‚¬ì„  ì ê·¼ì„  \(y=2x-2\)**.
""")

st.markdown("**Q3.** \( y=\\dfrac{k}{x-a}+b \)ì˜ ê·¸ë˜í”„ëŠ” ì–´ëŠ ì ì— ëŒ€í•´ ì ëŒ€ì¹­ì¸ê°€?")
show3 = st.toggle("ì •ë‹µ/í’€ì´ ë³´ê¸°", value=False, key="q3")
if show3:
    st.markdown("""
ê¸°ë³¸í˜• y=k/xëŠ” ì›ì  ëŒ€ì¹­. xâ†’x-a, yâ†’y+b ë³€í™˜ì€ ëŒ€ì¹­ì¤‘ì‹¬ì„ (a,b)ë¡œ ì´ë™ì‹œí‚´.  
**ì •ë‹µ: (a, b) ì ëŒ€ì¹­**.
""")

# ========================
# 7. ì‹œí—˜ ëª¨ë“œ (ìë™ì±„ì )
# ========================
st.header("7ï¸âƒ£ ì‹œí—˜ ëª¨ë“œ (ìë™ ì±„ì )")
score = 0
m1 = st.radio("â‘  ìœ ë¦¬í•¨ìˆ˜ì˜ ì •ì˜:", ["A. ë¶„ëª¨ ì—†ëŠ” ë‹¤í•­ì‹", "B. ë¶„ìÂ·ë¶„ëª¨ ëª¨ë‘ ë‹¤í•­ì‹", "C. ì§€ìˆ˜/ë¡œê·¸ í¬í•¨", "D. ì‚¼ê°í•¨ìˆ˜"], index=None)
if m1 and m1.startswith("B"): score += 1
m2 = st.radio("â‘¡ y=3/(x+2)-1 ì˜ ìˆ˜ì§/ìˆ˜í‰ ì ê·¼ì„ :", ["A. x=-2, y=-1", "B. x=2, y=1", "C. x=0, y=0", "D. x=-2, y=0"], index=None)
if m2 and m2.startswith("A"): score += 1
m3 = st.radio("â‘¢ degP<degQ ì¼ ë•Œ ìˆ˜í‰ ì ê·¼ì„ :", ["A. y=0", "B. y=1", "C. ì—†ìŒ", "D. x=0"], index=None)
if m3 and m3.startswith("A"): score += 1
m4 = st.radio("â‘£ (êµ¬ë©) íŒì • ì¡°ê±´:", ["A. Q(a)=0 & P(a)=0 (ê³µì¸ìˆ˜ ì†Œê±°)", "B. Q(a)=0 & P(a)â‰ 0", "C. P,Q ë‘˜ë‹¤ ì˜í•¨ìˆ˜", "D. aëŠ” ì„ì˜ì˜ ì‹¤ìˆ˜"], index=None)
if m4 and m4.startswith("A"): score += 1

if st.button("ğŸ“Š ì ìˆ˜ í™•ì¸"):
    st.subheader(f"ğŸ’¯ ê°ê´€ì‹ ì ìˆ˜: {score}/4")
    if score == 4:
        st.balloons()
        st.success("ì™„ë²½! ì •ì˜ì—­, êµ¬ë©/ì ê·¼ì„ , ì°¨ìˆ˜ë¹„êµê¹Œì§€ ëª¨ë‘ ì •í™•í•´ìš” ğŸ‘")
    elif score >= 2:
        st.info("ì¢‹ì•„ìš”! êµ¬ë© vs ìˆ˜ì§ì ê·¼ì„ , ìˆ˜í‰/ì‚¬ì„  ì ê·¼ì„  ë¶€ë¶„ë§Œ í•œ ë²ˆ ë” ë³µìŠµí•´ìš”.")
    else:
        st.warning("ê¸°ì´ˆë¶€í„° ë‹¤ì‹œâ€” 2~3ì¥ê¹Œì§€ â€˜ì •ì˜/ì•Œê³ ë¦¬ì¦˜/ê·¹í•œ ì •ì˜â€™ ë¶€ë¶„ì„ ë¨¼ì € ë³µìŠµí•´ìš”.")

# ========================
# 8. ë‹¨ì› ìš”ì•½
# ========================
st.header("8ï¸âƒ£ ë‹¨ì› ìš”ì•½")
st.markdown("""
| í•­ëª© | í•µì‹¬ ì •ë¦¬ |
|---|---|
| ì •ì˜ | \(R(x)=P(x)/Q(x)\), \(Q\not\equiv 0\) |
| ì •ì˜ì—­ | \(Q(x)\neq 0\) |
| ë¶ˆì—°ì† | \(Q(a)=0\). **P(a)â‰ 0 â†’ ìˆ˜ì§ì ê·¼ì„ ** / **P(a)=Q(a)=0 â†’ ì†Œê±°â†’êµ¬ë©** |
| ìˆ˜í‰ì ê·¼ì„  | \(\deg P<\deg Q \Rightarrow y=0\), \(\deg P=\deg Q \Rightarrow y=\text{LC}(P)/\text{LC}(Q)\) |
| ì‚¬ì„ ì ê·¼ì„  | \(\deg P=\deg Q+1\Rightarrow\) ë‹¤í•­ë‚˜ëˆ—ì…ˆ ëª«(1ì°¨) |
| ë³€í™˜ | \(y=k/(x-a)+b\Rightarrow\) ìˆ˜ì§ \(x=a\), ìˆ˜í‰ \(y=b\), ì¤‘ì‹¬ (a,b) ì ëŒ€ì¹­ |
| ì‹¤ìƒí™œ | ì†ë„-ì‹œê°„ \(t=D/v\), í¬ì„ \(C=S/(V_0+x)\), ë³‘ë ¬ì €í•­ \(R=(R_1R_2)/(R_1+R_2)\), ë Œì¦ˆ \(v=fu/(u-f)\) |
""")
st.success("ì´ì œ ì„ì˜ì˜ ìœ ë¦¬í•¨ìˆ˜ê°€ ì£¼ì–´ì ¸ë„ **ì •ì˜ì—­Â·êµ¬ë©/ì ê·¼ì„ Â·ë¬´í•œì›ë°© í–‰ë™Â·ë³€í™˜**ì„ ì²´ê³„ì ìœ¼ë¡œ ë¶„ì„í•  ìˆ˜ ìˆì–´ìš”.")
